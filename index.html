<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tonal Explorer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="page-shell">
        <header class="page-header">
            <div class="title-row">
                <p class="eyebrow">Tonal Explorer</p>
                <button id="infoButton" class="info-button" aria-label="About Tonal Explorer">i</button>
            </div>
        </header>

        <section id="inputArea" class="panel controls-panel">
            <div class="scale-stack">
                <div class="pill-row">
                    <div class="pill key-pill" id="keyPill" role="button" tabindex="0" aria-label="Select key">
                        <span class="pill-label">Key</span>
                        <span class="pill-right">
                          <span class="pill-value" id="keyPillValue"></span>
                        </span>
                    </div>
                    <button class="pill" id="modePill" aria-label="Select mode">
                        <span class="pill-label">Mode</span>
                        <span class="pill-value" id="modePillValue"></span>
                    </button>
                </div>
                <div id="scaleStrip" class="scale-strip" aria-label="Scale strip">
                    <div class="tile-viewport">
                        <div id="scaleTiles" class="scale-tiles" aria-live="polite"></div>
                    </div>
                </div>
                <div class="inline-actions">
                    <button id="random" class="ghost">Randomize</button>
                </div>
            </div>
        </section>

        <section id="outputArea" class="panel output-panel">
            <div id="mainContainer" class="main-grid">
                <div id="instrumentContainer" class="card instruments-card">
                    <div class="instrument-stack">
                        <div id="keyboardVisualizer" class="instrument keyboard" aria-label="Keyboard visualizer"></div>
                        <div id="fretboardVisualizer" class="instrument fretboard" aria-label="Guitar fretboard"></div>
                    </div>
                </div>
                <div id="availableChordsContainer" class="card chords-card">
                    <div class="card-heading">
                        <div class="heading-row">
                          <div>
                            <h2>Available chords</h2>
                            <p id="chordHeadingDesc"></p>
                          </div>
                          <div class="heading-actions">
                            <span id="rootFilterStatus" class="filter-status"></span>
                            <button id="allChordsBtn" class="ghost micro" style="display:none;">All Chords</button>
                          </div>
                        </div>
                    </div>
                    <div class="accordion" id="chordAccordion">
                        <div class="accordion-item" data-target="triadsOutput">
                            <button class="accordion-header" type="button">
                                <span>Triads</span><span class="chevron">▾</span>
                            </button>
                            <div class="accordion-panel" id="triadsOutput"></div>
                        </div>
                        <div class="accordion-item" data-target="seventhsOutput">
                            <button class="accordion-header" type="button">
                                <span>7ths</span><span class="chevron">▾</span>
                            </button>
                            <div class="accordion-panel" id="seventhsOutput"></div>
                        </div>
                        <div class="accordion-item" data-target="ninthsOutput">
                            <button class="accordion-header" type="button">
                                <span>9ths</span><span class="chevron">▾</span>
                            </button>
                            <div class="accordion-panel" id="ninthsOutput"></div>
                        </div>
                        <div class="accordion-item" data-target="suspendedOutput">
                            <button class="accordion-header" type="button">
                                <span>Suspended</span><span class="chevron">▾</span>
                            </button>
                            <div class="accordion-panel" id="suspendedOutput"></div>
                        </div>
                    </div>
                </div>
            
                <div id="chordContainer" class="card selections-card is-hidden">
                    <div id="buttonContainer" class="button-row">
                        <button id="match">Match</button>
                        <button id="clear">Clear</button>
                        <button id="generate">Generate</button>
                    </div>
                    <div id="chordSelections">
                        <div class="chordSelection">
                            <label for="chord1">Chord 1</label>
                            <select id="chord1"></select>
                            <div id="results1" class="results"></div>
                        </div>
                        <div class="chordSelection">
                            <label for="chord2">Chord 2</label>
                            <select id="chord2"></select>
                            <div id="results2" class="results"></div>
                        </div>
                        <div class="chordSelection">
                            <label for="chord3">Chord 3</label>
                            <select id="chord3"></select>
                            <div id="results3" class="results"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>  
    </div>
    <div id="wheelModal" class="wheel-modal hidden" role="dialog" aria-modal="true">
        <div class="wheel-modal-backdrop"></div>
        <div class="wheel-modal-content">
            <div class="wheel-modal-header">
                <h3 id="wheelModalTitle">Select</h3>
                <button id="closeWheelModal" class="ghost micro" aria-label="Close">✕</button>
            </div>
            <div class="wheel-modal-list" id="wheelModalList" role="listbox" tabindex="-1"></div>
        </div>
    </div>
    <div id="infoModal" class="wheel-modal hidden" role="dialog" aria-modal="true">
        <div class="wheel-modal-backdrop"></div>
        <div class="wheel-modal-content info-modal">
            <div class="wheel-modal-header info-modal-header">
                <h3 id="infoTitle">Music Theory Helper</h3>
                <button id="closeInfoModal" class="ghost micro" aria-label="Close info">✕</button>
            </div>
            <div class="info-body" role="document">
                <p class="subhead">Explore keys, modes, and harmonies without leaving the browser.</p>
                <hr>
                <div class="info-section">
                    <p class="eyebrow subtle">Key selection</p>
                    <ul>
                        <li>Tap the Key pill to choose a key.</li>
                        <li>For enharmonic keys (e.g., C#/Db), tap the key label to switch spelling.</li>
                    </ul>
                </div>
                <div class="info-section">
                    <p class="eyebrow subtle">Mode selection</p>
                    <ul>
                        <li>Tap the Mode pill to pick a mode.</li>
                    </ul>
                </div>
                <div class="info-section">
                    <p class="eyebrow subtle">Swipe / drag on tiles</p>
                    <ul>
                        <li>Swipe left/right to rotate through modes.</li>
                        <li>Swipe up/down to change key by semitone.</li>
                        <li>Longer drags can shift multiple steps.</li>
                    </ul>
                </div>
                <div class="info-section">
                    <p class="eyebrow subtle">Note tiles</p>
                    <ul>
                        <li>Tap a note tile to filter chords rooted on that note and highlight only that note on keyboard/fretboard.</li>
                        <li>Use All Chords to return to the full-scale view.</li>
                    </ul>
                </div>
                <div class="info-section">
                    <p class="eyebrow subtle">Chords list</p>
                    <ul>
                        <li>Tap a chord to highlight its tones on the keyboard + fretboard.</li>
                        <li>Tap the same chord again to unselect and return to the prior view.</li>
                    </ul>
                </div>
                <div class="info-section">
                    <p class="eyebrow subtle">Keyboard &amp; fretboard</p>
                    <ul>
                        <li>Colors match the scale-degree tiles.</li>
                        <li>Visualizers update as you change key/mode or select notes/chords.</li>
                    </ul>
                </div>
                <div class="info-section">
                    <p class="eyebrow subtle">Randomize</p>
                    <ul>
                        <li>Randomizes key and mode, updating tiles, visualizers, and chords.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
